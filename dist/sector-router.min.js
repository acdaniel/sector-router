/** sector-router v0.2.0 | (c) 2014 Adam Daniel <adam@acdaniel.com> | MIT license */
!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self);var r=t;r=r.sector||(r.sector={}),r=r.ext||(r.ext={}),r.router=e()}}(function(){return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t){var r;try{r=e("sector")}catch(n){r=window.sector}var o=e("path-to-regexp"),i=e("lodash-node/modern/arrays/zipObject");t.exports=r.Component.define({type:"router",defaults:{backRequestTopic:"ui.navigateBackRequested",forwardRequestTopic:"ui.navigateForwardRequested",navigateRequestTopic:"ui.navigateRequested",uiReadyTopic:"ui.ready",routeChangedTopic:"ui.routeChanged"},initialize:function(e){if(this.routes=[],e.routes)for(var t in e.routes)this.addRoute(t,e.routes[t]);this.subscribe(this.navigateRequestTopic,this.handleNavigateRequest),this.subscribe(this.backRequestTopic,this.handleBackRequest),this.subscribe(this.forwardRequestTopic,this.handleForwardRequest),this.listenTo(window,"hashchange",this.handleHashChange),this.subscribe(this.uiReadyTopic,function(){this.handleHashChange()})},addRoute:function(e,t){this.trace("adding named route: "+t,e);var r=[],n=o(e,r);this.routes.push({topic:t,re:n,keys:r})},getFragment:function(){var e,t="";return e=window.location.href.match(/#(.*)$/),t=e?e[1]:""},lookupRoute:function(e){e=e||"/",this.trace("parsing fragment "+e);for(var t=function(e){return e.name},r=0,n=this.routes.length;n>r;r++){var o=this.routes[r];this.trace("eval route",o);var a=o.re.test(e);if(a){var s=o.re.exec(e);this.trace("route selected",s);var u=o.keys.map(t);return{topic:o.topic,data:i(u,s.slice(1))}}}},handleHashChange:function(){var e,t;e=this.getFragment(),this.publish(this.routeChangedTopic,{path:e||"/"}),t=this.lookupRoute(e),t&&this.publish(t.topic,t.data)},handleNavigateRequest:function(e){var t=e.data?e.data:"/";window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+t},handleBackRequest:function(){window.history.back()},handleForwardRequest:function(){window.history.forward()}})},{"lodash-node/modern/arrays/zipObject":3,"path-to-regexp":6}],2:[function(e,t,r){r.mixins={},r.components={Router:e("./components/router")}},{"./components/router":1}],3:[function(e,t){function r(e,t){var r=-1,o=e?e.length:0,i={};for(t||!o||n(e[0])||(t=[]);++r<o;){var a=e[r];t?i[a]=t[r]:a&&(i[a[0]]=a[1])}return i}var n=e("../objects/isArray");t.exports=r},{"../objects/isArray":5}],4:[function(e,t){function r(e){return"function"==typeof e&&i.test(e)}var n=Object.prototype,o=n.toString,i=RegExp("^"+String(o).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");t.exports=r},{}],5:[function(e,t){var r=e("../internals/isNative"),n="[object Array]",o=Object.prototype,i=o.toString,a=r(a=Array.isArray)&&a,s=a||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&i.call(e)==n||!1};t.exports=s},{"../internals/isNative":4}],6:[function(e,t){function r(e,t,r){r=r||{};var n=r.sensitive,o=r.strict,i=r.end!==!1;return t=t||[],e instanceof RegExp?e:(e instanceof Array&&(e="("+e.join("|")+")"),e=e.concat(o?"":"/?").replace(/\/\(/g,"/(?:").replace(/([\/\.])/g,"\\$1").replace(/(\\\/)?(\\\.)?:(\w+)(\(.*?\))?(\*)?(\?)?/g,function(e,r,n,o,i,a,s){return r=r||"",n=n||"",i=i||"([^/"+n+"]+?)",s=s||"",t.push({name:o,optional:!!s}),""+(s?"":r)+"(?:"+n+(s?r:"")+i+(a?"((?:[\\/"+n+"].+?)?)":"")+")"+s}).replace(/\*/g,"(.*)"),new RegExp("^"+e+(i?"$":"(?=/|$)"),n?"":"i"))}t.exports=r},{}]},{},[2])(2)});